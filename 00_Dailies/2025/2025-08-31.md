ç»§ç»­ VCC. ç°åœ¨æœ‰è¿™å‡ ä¸ªå…³é”® File:

`VCC_COMPLETE_DATA_WORKFLOW.md`
- æ•°æ®å®šä¹‰ï¼š
	- X_train: adata_Training.h5ad (221,273ç»†èƒï¼Œ151æ‰°åŠ¨)
	- X_valç»“æ„: competition_val_template.h5ad å®šä¹‰æ ¼å¼
	- y_val: truth_val.h5ad (169,371ç»†èƒï¼Œ48æ‰°åŠ¨çœŸå€¼)
	- baseline: baseline.h5ad (è¯„åˆ†å‚ç…§æ ‡å‡†)
- å®Œæ•´æµç¨‹ï¼š
	1. è®­ç»ƒé˜¶æ®µ: ä½¿ç”¨adata_Training.h5adè®­ç»ƒæ‚¨çš„æ¨¡å‹
	2. é¢„æµ‹é˜¶æ®µ: æ¨¡å‹ä½œç”¨åœ¨éªŒè¯æ‰°åŠ¨ä¸Šç”Ÿæˆé¢„æµ‹
	3. è¯„åˆ†é˜¶æ®µ: GPUåŠ é€Ÿå¯¹æ¯”æ‚¨çš„é¢„æµ‹ vs truth_val.h5ad
	4. æ ‡å‡†åŒ–: ç›¸å¯¹äºbaselineè®¡ç®—æœ€ç»ˆVCCåˆ†æ•°
- æœºå™¨å­¦ä¹ è§†è§’ï¼š
	- æ¸…æ™°å®šä¹‰äº†X_train, y_train, X_val, y_valçš„å…·ä½“å†…å®¹
	- è§£é‡Šäº†ä»è®­ç»ƒåˆ°æµ‹è¯„çš„å®Œæ•´æ•°æ®æµå‘
	- æä¾›äº†ä»£ç ç¤ºä¾‹å’Œæ€§èƒ½ä¼˜åŒ–å»ºè®®



`complete_vcc_baseline_workflow.py`:
- âœ… 48ä¸ªæ‰°åŠ¨å®Œç¾åŒ¹é…ï¼Œ94.1%åŒ¹é…ç‡
- âœ… non-targetingå¯¹ç…§ç»„å­˜åœ¨
- âœ… è„šæœ¬ä¼šè‡ªåŠ¨å¤„ç†3ä¸ªå¤šä½™æ‰°åŠ¨çš„è¿‡æ»¤
- âš¡ GPUåŠ é€Ÿå°†æ­£å¸¸å·¥ä½œ
- ç›®çš„: è·å¾—baselineçš„VCCåˆ†æ•°ä½œä¸ºå‚ç…§æ ‡å‡†
- è¾“å‡º: vcc_baseline_aggregated_scores.csv



`python evaluate_your_new_model.py`

---

å…³æ³¨ä¸€ä¸‹ statistical baseline.py è¿™ä¸ªç»™å‡ºçš„æ–‡ä»¶é‡Œé¢, pert_counts_Validation.csv ä¼¼ä¹æ˜¯ä¸€ä¸ªé‡è¦çš„è¾“å…¥æ–‡ä»¶. è¿™ä¸ªä¼¼ä¹æ˜¯æˆ‘ä»¬çš„ X_val æ¥æº? ä½†æ˜¯è¿™ä¸ª `competition_val_template.h5ad` åˆæ˜¯ä»€ä¹ˆ?

å…³äºè¯„åˆ†æ ‡å‡†è¿™ä¸ª PDS, ä¹‹å‰å­¦ä¹ çš„ç»“æœæ˜¯è¯´è¿™ä¸ªæ˜¯ Spearman Corr [[ä»»åŠ¡ç†è§£ä¸è¯„åˆ†ç³»ç»Ÿæ„å»º]] . ä½†æ˜¯ä¸ºä»€ä¹ˆåˆè¯´è¿™ä¸ªæ˜¯ L1 Manhattan Distance?

---

å¯ä»¥æ ¹æ® stat_baseline çš„æ•°æ®æµåæ¨ vcc baseline çš„æ•°æ®æ„é€ è¯¶. 

æ¢è¨€ä¹‹, æˆ‘ä»¬å·²çŸ¥ `stat_baseline` æ˜¯ä¸€ä¸ªè¢«è¯å®çš„æ•°æ®å¤„ç†æµç¨‹. é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ç”¨è¿™é‡Œçš„ input ä½œä¸º baseline çš„ input . `src/cell_eval/_baseline.py`


---
- `src/_cli/` æ˜¯ç›´æ¥å®‰è£…ä¹‹å `cell-eval baseline ...` ç­‰å‘½ä»¤è¡Œç›´æ¥è°ƒç”¨çš„æ¥å£

----

```bash
cell-eval baseline \
    -a /path/to/training_data.h5ad \ # Path to the anndata
    -o ./vcc_baseline.h5ad \
    -O ./vcc_baseline_de.csv \
    --control-pert "non-targeting" \ # Name of the control perturbation
    --pert-col "target" \ # Name of the column designated perturbations
    --num-threads 8
```

- `_evaluator.py` æ˜¯æœ€ç»ˆçš„ç®— metric çš„ä»£ç . è¿™é‡Œæœ‰å¾ˆå¤š profile, æ˜ç¡®ä¸€ä¸‹å¦‚æœé€‰æ‹© vcc çš„è¯éƒ½ä¼šè¿è¡Œå“ªäº› profile. 
	- ç»“æœè¿˜ä¼šæœ‰ä¸€ä¸ª `MetricPipeline` è¿™ä¸ªä¹Ÿå…³æ³¨ä¸€ä¸‹é€»è¾‘
- 

---
**Today Todo**
- [ ] å½»åº•ç ”ç©¶æ˜ç™½ `src/cell_eval/_baseline.py` çš„è¿ä½œ, åˆ¶ä½œ slide, **å‘¨ä¸€è®²è§£** (æœ¬ä»£ç ä»¥åŠ cli ä»£ç çš„æ¥å£)
- [ ] å½»åº•ç ”ç©¶æ¸…æ¥šæˆ‘ä»¬çš„æ•°æ®. å¼„æ¸…æˆ‘ä»¬çš„è®­ç»ƒé›†, éªŒè¯é›†ç­‰. å¼„æ¸…æ‰€æœ‰å…³é”®æ•°æ®å’Œå…¶å¯ä¿¡æ€§, æ•°æ®æ¥æºç­‰ (åˆ°åº•æ˜¯å®˜æ–¹æä¾›çš„è¿˜æ˜¯æˆ‘ä»¬æ‹Ÿåˆçš„ç­‰). æ•´ç†å‡ºä¸€ä¸ªæ­£å¼çš„æ–‡ä»¶å¤¹, ç°åœ¨çš„ wd å¤ªæ··ä¹±äº†. 
- [ ] å¼„æ¸…è®­ç»ƒ, æµ‹è¯•çš„å®Œæ•´æµç¨‹, æ•°æ®æµç­‰. å…·ä½“å®ç°ä¸ä¸€å®šè¦å½»åº• OK ä½†æ˜¯å…¶ä¾èµ–å…³ç³», å…¶ç†è®ºæ€§è´¨è¦æ˜ç¡®. å…¶ä¼ªä»£ç é€»è¾‘è¦æ¸…æ¥š. **å‘¨ä¸€è®²è§£.**
- [ ] è‡ªå·±å½»åº•å¼„æ¸…è¯„åˆ†ç³»ç»Ÿçš„é€»è¾‘. äº‰å–èƒ½å¤Ÿè¿è¡Œ. å¹¶ä¸”æ£€æŸ¥ gpu åŠ é€Ÿç‰ˆæœ¬çš„æ­£ç¡®æ€§. 

----

adata_Training.h5ad   gene_names.csv  pert_counts_Validation.csv


----

ğŸ“‹ VCC Baselineå¤ç°è„šæœ¬åŒ…

  æˆ‘å·²ç»ä¸ºæ‚¨åˆ›å»ºäº†3ä¸ªPythonè„šæœ¬æ¥å¤ç°VCC baselineï¼š

  ğŸ”§ 1. install_requirements.py

  ç”¨é€”: å®‰è£…æ‰€éœ€ä¾èµ–
  cd ~/run/xinby/0831/cell-eval
  python install_requirements.py

  ğŸ” 2. vcc_data_inspector.py

  ç”¨é€”: æ£€æŸ¥æ•°æ®å®Œæ•´æ€§å’Œç»“æ„
  python vcc_data_inspector.py
  åŠŸèƒ½:
  - åˆ†æè®­ç»ƒæ•°æ® (vcc_data/adata_Training.h5ad)
  - æ£€æŸ¥éªŒè¯é›†è®¡æ•° (vcc_data/pert_counts_Validation.csv)
  - æ¯”è¾ƒè®­ç»ƒ/éªŒè¯é›†çš„æ‰°åŠ¨é‡å æƒ…å†µ
  - éªŒè¯competition_support_setæ•°æ®

  ğŸš€ 3. vcc_baseline_runner.py

  ç”¨é€”: ç”Ÿæˆå¹¶è¯„ä¼°mean baseline
  python vcc_baseline_runner.py
  æ ¸å¿ƒæ­¥éª¤:
  1. ç”Ÿæˆbaseline: ä½¿ç”¨build_base_mean_adataè®¡ç®—æ‰€æœ‰è®­ç»ƒæ‰°åŠ¨çš„å¹³å‡è¡¨è¾¾è°±
  2. æ¨¡æ‹Ÿè¯„ä¼°: ç”±äºç¼ºå°‘çœŸå®éªŒè¯æ ‡ç­¾ï¼Œä½¿ç”¨competition_support_setè¿›è¡Œpipelineæµ‹è¯•
  3. VCCæŒ‡æ ‡: è®¡ç®—maeã€discrimination_score_l1ã€overlap_at_Nä¸‰ä¸ªæ ¸å¿ƒæŒ‡æ ‡

  ğŸ“ è¾“å‡ºç»“æœç»“æ„

  baseline_results/
  â”œâ”€â”€ baseline/
  â”‚   â”œâ”€â”€ mean_baseline.h5ad      # ç”Ÿæˆçš„baselineé¢„æµ‹
  â”‚   â””â”€â”€ mean_baseline_de.csv    # å·®å¼‚è¡¨è¾¾ç»“æœ
  â””â”€â”€ evaluation/
      â”œâ”€â”€ results.csv             # æ¯ä¸ªæ‰°åŠ¨çš„è¯¦ç»†æŒ‡æ ‡
      â”œâ”€â”€ agg_results.csv         # èšåˆæŒ‡æ ‡
      â””â”€â”€ detailed_metrics.csv    # VCCæ ¸å¿ƒæŒ‡æ ‡åˆ†æ

  ğŸ¯ æ‰§è¡Œå»ºè®®

  4. å…ˆè¿è¡Œ python install_requirements.py ç¡®ä¿ç¯å¢ƒæ­£ç¡®
  5. å†è¿è¡Œ python vcc_data_inspector.py æ£€æŸ¥æ•°æ®
  6. æœ€åè¿è¡Œ python vcc_baseline_runner.py ç”Ÿæˆbaseline

  è¯·å°†è¿™äº›è„šæœ¬å¤åˆ¶åˆ°æ‚¨çš„æœåŠ¡å™¨ ~/run/xinby/0831/cell-eval/ ç›®å½•ä¸‹ï¼Œç„¶åä¾æ¬¡æ‰§è¡Œã€‚æˆ‘ç­‰å¾…æ‚¨çš„æ‰§è¡Œç»“æœï¼

---
ç°åœ¨ä¸€ä¸ªæ¯”è¾ƒå¹²å‡€çš„ç¯å¢ƒåœ¨ mac çš„ xinby home ä¸Š. è¿™å›è¿›è¡Œäº†è¯¦ç»†çš„æ•°æ®è¯´æ˜.  åœ¨æœåŠ¡å™¨ä¸Šå¯¹åº” 0831