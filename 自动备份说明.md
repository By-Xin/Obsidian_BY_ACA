# ByAca 自动备份系统

## ✅ 已完成配置

### 📋 当前设置
- **任务名称**: ByAca-AutoBackup
- **执行时间**: 每天晚上 20:00 (8:00 PM)
- **执行内容**: 自动同步笔记并推送到 GitHub
- **GitHub 仓库**: https://github.com/By-Xin/Obsidian_BY_ACA.git
- **状态**: ✅ 已启用

### 📍 文件位置
- **源目录**: `C:\Users\xinby\iCloudDrive\iCloud~md~obsidian\ByAca`
- **备份目录**: `C:\Users\xinby\Documents\ByAca-backup`
- **备份脚本**: `C:\Users\xinby\Documents\ByAca-backup\backup.ps1`

---

## 🎮 管理工具

### 快速查看状态
```powershell
cd "C:\Users\xinby\Documents\ByAca-backup"
.\管理工具.ps1 status
```

### 立即运行备份
```powershell
.\管理工具.ps1 run
```

### 禁用自动备份
```powershell
.\管理工具.ps1 disable
```

### 启用自动备份
```powershell
.\管理工具.ps1 enable
```

### 删除备份任务
```powershell
.\管理工具.ps1 delete
```

---

## 📝 手动备份

如果你想手动执行备份：

### 仅本地备份
```powershell
cd "C:\Users\xinby\Documents\ByAca-backup"
.\backup.ps1
```

### 备份并推送到 GitHub
```powershell
.\backup.ps1 -Push
```

### 自定义提交信息
```powershell
.\backup.ps1 -Push -Message "完成深度学习章节"
```

---

## 🔍 查看备份历史

### 查看最近的备份记录
```powershell
cd "C:\Users\xinby\Documents\ByAca-backup"
git log --oneline -10
```

### 查看某次备份的详细内容
```powershell
git show <commit-hash>
```

### 查看文件变更历史
```powershell
git log --follow "路径/文件名.md"
```

---

## 🔧 Windows 任务计划程序

你也可以通过 Windows 任务计划程序管理：

1. 按 `Win + R`，输入 `taskschd.msc`，回车
2. 在左侧找到 "任务计划程序库"
3. 找到 "ByAca-AutoBackup" 任务
4. 右键可以运行、禁用、修改等操作

---

## ⚠️ 注意事项

### 自动备份会做什么？
1. 从 iCloud 同步所有笔记文件到本地备份目录
2. 提交所有更改到本地 Git 仓库
3. 自动推送到 GitHub

### 不会备份什么？
- `.obsidian` 配置文件夹（个人设置）
- 临时文件 (`.tmp`, `.temp`)
- 系统文件 (`.DS_Store`, `Thumbs.db`)

### 备份失败怎么办？
1. 检查网络连接
2. 确认 GitHub 凭证正常
3. 查看任务日志：`Get-ScheduledTaskInfo -TaskName "ByAca-AutoBackup"`
4. 手动运行脚本测试：`.\backup.ps1 -Push`

---

## 💡 建议

- **每周检查一次**: 运行 `.\管理工具.ps1 status` 确认任务正常
- **重要更新后**: 手动运行 `.\backup.ps1 -Push` 立即备份
- **定期查看 GitHub**: 确认笔记正常同步

---

## 🆘 常见问题

### Q: 如何修改备份时间？
A: 运行 `.\install-task.ps1`，或在任务计划程序中修改触发器

### Q: 如何暂时停止自动备份？
A: 运行 `.\管理工具.ps1 disable`

### Q: 如何完全删除自动备份？
A: 运行 `.\管理工具.ps1 delete`

### Q: 备份会影响 Obsidian 使用吗？
A: 不会，备份只从 iCloud 读取文件，不修改源文件

---

🎉 **自动备份已配置完成！你的笔记将每天自动备份到 GitHub。**
